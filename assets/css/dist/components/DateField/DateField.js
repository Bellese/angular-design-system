"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DateField=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_FormLabel=require("../FormLabel/FormLabel"),_FormLabel2=_interopRequireDefault(_FormLabel),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_react=require("react"),_react2=_interopRequireDefault(_react),_TextField=require("../TextField/TextField"),_TextField2=_interopRequireDefault(_TextField),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_lodash=require("lodash.uniqueid"),_lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var DateField=exports.DateField=function(_React$PureComponent){function DateField(props){_classCallCheck(this,DateField);var _this=_possibleConstructorReturn(this,(DateField.__proto__||Object.getPrototypeOf(DateField)).call(this,props));return _this.handleBlur=_this.handleBlur.bind(_this),_this.handleChange=_this.handleChange.bind(_this),_this}return _inherits(DateField,_react2.default.PureComponent),_createClass(DateField,[{key:"labelId",value:function labelId(){return this._labelId||(this._labelId=(0,_lodash2.default)("datefield_label_")),this._labelId}},{key:"formatDate",value:function formatDate(){if(this.props.dateFormatter){var values={month:this.monthInput.value,day:this.dayInput.value,year:this.yearInput.value};return this.props.dateFormatter(values)}}},{key:"handleBlur",value:function handleBlur(evt){this.props.onBlur&&this.props.onBlur(evt,this.formatDate()),this.props.onComponentBlur&&this.handleComponentBlur(evt)}},{key:"handleChange",value:function handleChange(evt){this.props.onChange(evt,this.formatDate())}},{key:"handleComponentBlur",value:function handleComponentBlur(evt){var _this2=this;setTimeout((function(){document.activeElement!==_this2.dayInput&&document.activeElement!==_this2.monthInput&&document.activeElement!==_this2.yearInput&&_this2.props.onComponentBlur(evt,_this2.formatDate())}),20)}},{key:"render",value:function render(){var _this3=this,sharedDateFieldProps={className:"ds-l-col--auto",labelClassName:"ds-u-font-weight--normal ds-u-margin-top--1",inversed:this.props.inversed,onBlur:(this.props.onBlur||this.props.onComponentBlur)&&this.handleBlur,onChange:this.props.onChange&&this.handleChange,type:"number"},labelId=this.labelId();return _react2.default.createElement("fieldset",{className:"ds-c-fieldset"},_react2.default.createElement(_FormLabel2.default,{component:"legend",errorMessage:this.props.errorMessage,hint:this.props.hint,inversed:this.props.inversed,requirementLabel:this.props.requirementLabel,id:labelId},this.props.label),_react2.default.createElement("div",{className:"ds-l-form-row"},_react2.default.createElement(_TextField2.default,_extends({},sharedDateFieldProps,{fieldClassName:(0,_classnames2.default)("ds-c-field--month",{"ds-c-field--error":this.props.monthInvalid}),fieldRef:function fieldRef(el){_this3.monthInput=el,_this3.props.monthFieldRef&&_this3.props.monthFieldRef(el)},max:"12",min:"1",defaultValue:this.props.monthDefaultValue,label:this.props.monthLabel,name:this.props.monthName,value:this.props.monthValue,"aria-describedby":labelId})),_react2.default.createElement(_TextField2.default,_extends({},sharedDateFieldProps,{fieldClassName:(0,_classnames2.default)("ds-c-field--day",{"ds-c-field--error":this.props.dayInvalid}),fieldRef:function fieldRef(el){_this3.dayInput=el,_this3.props.dayFieldRef&&_this3.props.dayFieldRef(el)},max:"31",min:"1",defaultValue:this.props.dayDefaultValue,label:this.props.dayLabel,name:this.props.dayName,value:this.props.dayValue,"aria-describedby":labelId})),_react2.default.createElement(_TextField2.default,_extends({},sharedDateFieldProps,{fieldClassName:(0,_classnames2.default)("ds-c-field--year",{"ds-c-field--error":this.props.yearInvalid}),fieldRef:function fieldRef(el){_this3.yearInput=el,_this3.props.yearFieldRef&&_this3.props.yearFieldRef(el)},defaultValue:this.props.yearDefaultValue,label:this.props.yearLabel,min:this.props.yearMin,max:this.props.yearMax,name:this.props.yearName,value:this.props.yearValue,"aria-describedby":labelId}))))}}]),DateField}();DateField.defaultProps={label:"Date",hint:"For example: 4 28 1986",dayLabel:"Day",dayName:"day",monthLabel:"Month",monthName:"month",yearLabel:"Year",yearMin:1900,yearName:"year"},DateField.propTypes={dateFormatter:_propTypes2.default.func,errorMessage:_propTypes2.default.node,hint:_propTypes2.default.node,inversed:_propTypes2.default.bool,label:_propTypes2.default.node,requirementLabel:_propTypes2.default.node,onBlur:_propTypes2.default.func,onComponentBlur:_propTypes2.default.func,onChange:_propTypes2.default.func,dayLabel:_propTypes2.default.node,dayName:_propTypes2.default.string,dayDefaultValue:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),dayFieldRef:_propTypes2.default.func,dayInvalid:_propTypes2.default.bool,dayValue:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),monthLabel:_propTypes2.default.node,monthName:_propTypes2.default.string,monthDefaultValue:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),monthFieldRef:_propTypes2.default.func,monthInvalid:_propTypes2.default.bool,monthValue:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),yearDefaultValue:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),yearFieldRef:_propTypes2.default.func,yearInvalid:_propTypes2.default.bool,yearLabel:_propTypes2.default.node,yearMax:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),yearMin:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),yearName:_propTypes2.default.string,yearValue:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number])},exports.default=DateField;