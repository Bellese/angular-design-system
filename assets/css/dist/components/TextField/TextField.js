"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextField=exports.unmaskValue=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Mask=require("./Mask"),_Mask2=_interopRequireDefault(_Mask),_FormLabel=require("../FormLabel/FormLabel"),_FormLabel2=_interopRequireDefault(_FormLabel),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_react=require("react"),_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_lodash=require("lodash.uniqueid"),_lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.unmaskValue=_Mask.unmask;var TextField=exports.TextField=function(_React$PureComponent){function TextField(props){_classCallCheck(this,TextField);var _this=_possibleConstructorReturn(this,(TextField.__proto__||Object.getPrototypeOf(TextField)).call(this,props));return _this.id=props.id||(0,_lodash2.default)("textfield_"),_this}return _inherits(TextField,_react2.default.PureComponent),_createClass(TextField,[{key:"ariaLabel",value:function ariaLabel(){return this.props.ariaLabel?this.props.ariaLabel:"currency"===this.props.mask?this.props.label+". Enter amount in dollars.":void 0}},{key:"renderFieldAndMask",value:function renderFieldAndMask(field){var maskName=this.props.mask;return maskName?_react2.default.createElement("div",{className:"ds-c-field-mask ds-c-field-mask--"+maskName},this.renderMaskOverlay(),_react2.default.createElement(_Mask2.default,{mask:maskName},field)):field}},{key:"renderMaskOverlay",value:function renderMaskOverlay(){if(this.props.mask){return _react2.default.createElement("div",{className:"ds-c-field__before ds-c-field__before--"+this.props.mask},{currency:"$"}[this.props.mask])}}},{key:"render",value:function render(){var _props=this.props,className=(_props.ariaLabel,_props.className),labelClassName=_props.labelClassName,fieldClassName=_props.fieldClassName,errorMessage=_props.errorMessage,hint=_props.hint,requirementLabel=(_props.id,_props.requirementLabel),inversed=_props.inversed,rows=_props.rows,mask=_props.mask,multiline=_props.multiline,label=_props.label,fieldRef=_props.fieldRef,size=_props.size,type=_props.type,fieldProps=_objectWithoutProperties(_props,["ariaLabel","className","labelClassName","fieldClassName","errorMessage","hint","id","requirementLabel","inversed","rows","mask","multiline","label","fieldRef","size","type"]),FieldComponent=multiline?"textarea":"input",_rows=multiline&&rows?rows:void 0,classes=(0,_classnames2.default)("ds-u-clearfix",className),fieldClasses=(0,_classnames2.default)("ds-c-field",mask&&"ds-c-field--"+mask,{"ds-c-field--error":"string"==typeof errorMessage,"ds-c-field--inverse":inversed},fieldClassName,size&&"ds-c-field--"+size),field=_react2.default.createElement(FieldComponent,_extends({"aria-label":this.ariaLabel(),className:fieldClasses,id:this.id,ref:fieldRef,rows:_rows,type:multiline?void 0:type},fieldProps));return _react2.default.createElement("div",{className:classes},_react2.default.createElement(_FormLabel2.default,{className:labelClassName,errorMessage:errorMessage,fieldId:this.id,hint:hint,requirementLabel:requirementLabel,inversed:inversed},label),this.renderFieldAndMask(field,mask))}}]),TextField}();TextField.defaultProps={type:"text"},TextField.propTypes={ariaLabel:_propTypes2.default.string,className:_propTypes2.default.string,defaultValue:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),disabled:_propTypes2.default.bool,errorMessage:_propTypes2.default.node,fieldClassName:_propTypes2.default.string,fieldRef:_propTypes2.default.func,hint:_propTypes2.default.node,id:_propTypes2.default.string,requirementLabel:_propTypes2.default.node,inversed:_propTypes2.default.bool,label:_propTypes2.default.node.isRequired,labelClassName:_propTypes2.default.string,mask:_propTypes2.default.oneOf(["currency","phone","ssn","zip"]),max:_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.string]),min:_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.string]),multiline:_propTypes2.default.bool,name:_propTypes2.default.string.isRequired,onBlur:_propTypes2.default.func,onChange:_propTypes2.default.func,rows:_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.string]),size:_propTypes2.default.oneOf(["small","medium"]),type:_propTypes2.default.string,value:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number])},exports.default=TextField;